{"version":3,"file":"static/js/671.fd1ab803.chunk.js","mappings":"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","sources":["Components/Queries/StaffApproval.js"],"sourcesContent":["import { useContext, useState, useEffect } from \"react\";\nimport UserContext from \"../../Hooks/UserContext\";\nimport { Navigate } from \"react-router-dom\";\nimport axios from \"../../config/api/axios\";\nimport { FaPlus, FaTrash } from \"react-icons/fa\";\nimport { toast } from \"react-toastify\";\nimport Loading from \"../Layouts/Loading\";\nimport ErrorStrip from \"../ErrorStrip\";\nimport { TableHeader } from \"../Table\";\n\nconst StaffApproval = () => {\n  const { user } = useContext(UserContext);\n  const [newStaffs, setNewStaffs] = useState([]);\n  const [error, setError] = useState(\"\");\n\n  useEffect(() => {\n    const getNewStaffs = async () => {\n      try {\n        const response = await axios.get(\"staff/approve/\" + user.department);\n        setNewStaffs(response.data);\n      } catch (err) {\n        setError(err);\n      }\n    };\n    getNewStaffs();\n  }, [user]);\n\n  const handleApprove = async (e) => {\n    const index = e.currentTarget.id;\n    const staff = newStaffs[index];\n    staff.role = \"teacher\";\n    try {\n      const response = await axios.patch(\"/staff/\" + staff._id, {\n        id: staff._id,\n        role: staff.role,\n      });\n      newStaffs.splice(index, 1);\n      toast.success(response.data.message);\n      setError(\"\");\n    } catch (err) {\n      setError(err);\n    }\n  };\n\n  const handleDelete = async (e) => {\n    const staff = newStaffs[e.currentTarget.id]._id;\n    try {\n      const response = await axios.delete(\"/staff/\" + staff);\n      newStaffs.splice(e.currentTarget.id, 1);\n      toast.success(response.data.message, {\n        icon: ({ theme, type }) => <FaTrash />,\n      });\n    } catch (err) {\n      toast.error(err.message);\n    }\n  };\n\n  return (\n    <>\n      {user.role === \"HOD\" ? (\n        <main className=\"staff__approval\">\n          <h2 className=\"mb-2 mt-3 whitespace-break-spaces text-4xl font-bold text-violet-950 underline decoration-inherit decoration-2 underline-offset-4 dark:mt-0 dark:text-slate-400 md:text-6xl\">\n            Approve Staff\n          </h2>\n          <h3 className=\"text-2xl font-semibold\">\n            Department: {user.department}\n          </h3>\n          <form>\n            {newStaffs.length ? (\n              <div className=\"my-4 w-full overflow-auto rounded-md border-2 border-slate-900 dark:border-slate-500 dark:p-[1px]  \">\n                <table className=\"w-full\">\n                  <TableHeader\n                    Headers={[\"Name\", \"Email\", \"Username\", \"Approve\", \"Reject\"]}\n                    AdditionalRowClasses={\"text-left\"}\n                    AdditionalHeaderClasses={\"last:text-center secondLast\"}\n                  />\n                  <tbody>\n                    {newStaffs?.map((staff, index) => (\n                      <tr key={index}>\n                        <td className=\"border-t-[1px] border-slate-400 p-2\">\n                          {staff.name}\n                        </td>\n                        <td className=\"border-t-[1px] border-slate-400 p-2\">\n                          {staff.email}\n                        </td>\n                        <td className=\"border-t-[1px] border-slate-400 p-2\">\n                          {staff.username}\n                        </td>\n                        <td className=\"border-t-[1px] border-slate-400 p-0\">\n                          <button\n                            type=\"button\"\n                            id={index}\n                            onClick={(e) => handleApprove(e)}\n                            className=\"m-0 flex h-auto w-full justify-center bg-transparent  py-3 text-xl duration-200 text-violet-400 hover:text-white hover:bg-violet-900 \"\n                          >\n                            <FaPlus />\n                          </button>\n                        </td>\n                        <td className=\"border-t-[1px] border-slate-400 p-0\">\n                          <button\n                            className=\"m-0 flex h-auto w-full justify-center bg-transparent  py-3 text-xl duration-200 text-violet-400 hover:text-white hover:bg-red-600 \"\n                            type=\"button\"\n                            id={index}\n                            onClick={(e) => handleDelete(e)}\n                          >\n                            <FaTrash />\n                          </button>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            ) : (\n              \"\"\n            )}\n            {!newStaffs.length && !error && <Loading />}\n          </form>\n          {error ? <ErrorStrip error={error} /> : \"\"}\n        </main>\n      ) : (\n        <Navigate to=\"/dash\" />\n      )}\n    </>\n  );\n};\n\nexport default StaffApproval;\n"],"names":["StaffApproval","user","useContext","UserContext","newStaffs","setNewStaffs","useState","error","setError","useEffect","async","response","axios","get","department","data","err","getNewStaffs","_jsx","_Fragment","children","role","_jsxs","className","length","TableHeader","Headers","AdditionalRowClasses","AdditionalHeaderClasses","map","staff","index","name","email","username","type","id","onClick","e","currentTarget","patch","_id","splice","toast","success","message","handleApprove","FaPlus","delete","icon","_ref","theme","FaTrash","handleDelete","Loading","ErrorStrip","Navigate","to"],"ignoreList":[],"sourceRoot":""}