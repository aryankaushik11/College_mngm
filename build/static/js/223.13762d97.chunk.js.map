{"version":3,"file":"static/js/223.13762d97.chunk.js","mappings":"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","sources":["Components/Forms/InternalResultForm.js"],"sourcesContent":["import { useState, useContext } from \"react\";\nimport axios from \"../../config/api/axios\";\nimport UserContext from \"../../Hooks/UserContext\";\nimport { FaPlus, FaEdit, FaTrash } from \"react-icons/fa\";\nimport { toast } from \"react-toastify\";\nimport { TableHeader } from \"../Table\";\nimport ErrorStrip from \"../ErrorStrip\";\n\nconst InternalResultForm = () => {\n  const { paperList } = useContext(UserContext);\n  const [paper, setPaper] = useState(\"\");\n  const [disabled, setDisabled] = useState(true);\n  const [internal, setInternal] = useState([]);\n  const [id, setId] = useState([]);\n  const [error, setError] = useState(\"\");\n\n  const fetchInternal = async (e) => {\n    setInternal([]);\n    setError(\"\");\n    e.preventDefault();\n    try {\n      // fetching internal record\n      const response = await axios.get(\"/internal/\" + paper);\n      // saving record id for updating/deleting record\n      setId(response.data._id);\n      setInternal(response.data.marks);\n      setDisabled(true);\n      setError(\"\");\n    } catch (err) {\n      setError(err);\n      // incase no record exists\n      if (err.response.status === 404) {\n        // fetching students list and mapping to add fields\n        const response = await axios.get(\"paper/\" + paper);\n        const students = response.data.students;\n        students.forEach((student) => {\n          Object.assign(student, {\n            test: 0,\n            seminar: 0,\n            assignment: 0,\n            attendance: 0,\n            total: 0,\n          });\n        });\n        setInternal(students);\n        setDisabled(false);\n      }\n    }\n  };\n\n  const addInternalMark = async (e) => {\n    e.preventDefault();\n    const marks = { id, paper, marks: internal };\n    try {\n      // adding new internal mark record\n      const response = await axios.post(\"internal/\" + paper, marks);\n      toast.success(response.data.message);\n      setDisabled(true);\n      setError(\"\");\n      fetchInternal(e);\n    } catch (err) {\n      // conflict, record already exists\n      if (err.response.status === 409) {\n        try {\n          // updating internal record\n          const response = await axios.patch(\"internal/\" + paper, marks);\n          toast.success(response.data.message);\n          setDisabled(true);\n          setError(\"\");\n        } catch (err) {\n          setError(err);\n        }\n      } else setError(err);\n    }\n  };\n\n  const deleteInternalMark = async (e) => {\n    e.preventDefault();\n    try {\n      const response = await axios.delete(\"internal/\" + id);\n      toast.success(response.data.message, {\n        icon: ({ theme, type }) => <FaTrash />,\n      });\n      setInternal([]);\n    } catch (err) {\n      setError(err);\n    }\n  };\n\n  // updating internal state on \"onChange\" event.\n  const handleFormChange = (e) => {\n    // the whole thing is a convoluted mess, but it works.\n    // if you have an alternative, DM ;).\n    const index = parseInt(e.target.id);\n    const value = e.target.value;\n    const key = e.target.name;\n    const newStudent = internal[index];\n    newStudent[key] = value;\n    const newInternal = internal.map((student, index) => {\n      if (index === e.target.id) {\n        return newStudent;\n      } else return student;\n    });\n    setInternal(newInternal);\n  };\n\n  return (\n    <main className=\"internal\">\n      <h2 className=\"mb-2 mt-3 whitespace-break-spaces text-4xl font-bold text-violet-950 underline decoration-inherit decoration-2 underline-offset-4 dark:mt-0 dark:text-slate-400 md:text-6xl\">\n        Internal Mark\n      </h2>\n      <section className=\"form__head\">\n        <form className=\"w-full gap-4 accent-violet-900 md:flex\">\n          <select\n            className=\"mb-4 block h-10 w-full rounded-md border-[1.5px] border-solid border-slate-400 p-1 pl-2 outline-none selection:border-slate-200 focus:border-violet-900 dark:border-slate-200 dark:caret-inherit dark:focus:border-violet-400 dark:active:border-violet-400 md:w-1/3\"\n            placeholder=\"select paper\"\n            name=\"paper\"\n            id=\"paper\"\n            value={paper}\n            required\n            onChange={(e) => setPaper(e.target.value)}\n          >\n            <option defaultValue hidden>\n              Select Paper\n            </option>\n            {paperList.map((paper) => (\n              <option key={paper._id} value={paper._id}>\n                {paper.paper}\n              </option>\n            ))}\n          </select>\n          <button\n            className=\"mb-4 h-10 w-auto rounded-md border-[1.5px] border-solid border-violet-900 bg-slate-800 px-8 py-2 font-semibold tracking-wide text-slate-200 hover:bg-violet-900 focus:bg-violet-900 disabled:cursor-not-allowed dark:border-violet-300 dark:bg-violet-900 dark:text-violet-100 dark:hover:bg-slate-900\"\n            type=\"submit\"\n            onClick={(e) => fetchInternal(e)}\n          >\n            Fetch\n          </button>\n        </form>\n      </section>\n      <div>{error ? <ErrorStrip error={error} /> : \"\"}</div>\n      <section className=\"internal__body\">\n        <form className=\"internal__body__form group\">\n          {internal.length ? (\n            \n            <div className=\"my-4 w-full overflow-auto rounded-md border-2 border-slate-900 dark:border-slate-500 dark:p-[1px]\">\n              <table className=\"w-full\">\n                <TableHeader\n                  AdditionalHeaderClasses={\"first:text-left\"}\n                  Headers={[\n                    \"Student\",\n                    \"Test\",\n                    \"Seminar\",\n                    \"Assignment\",\n                    \"Attendance\",\n                    \"Total\",\n                  ]}\n                />\n                <tbody className=\"\">\n                  {internal?.map((student, index) => (\n                    <tr\n                      key={index}\n                      className={\n                        // checking whether the student passed (total mark is above 12), bgcolor to represent it.\n                        parseInt(student?.test) +\n                          parseInt(student?.seminar) +\n                          parseInt(student?.assignment) +\n                          parseInt(student?.attendance) >\n                        12\n                          ? \"border-t-[1px] border-slate-400 bg-violet-900/50 first:border-none\"\n                          : \"border-t-[1px] border-slate-400 first:border-none\"\n                      }\n                    >\n                      <td className=\"p-2 text-left\">{student.name}</td>\n                      <td className=\"p-2 text-center\">\n                        <input\n                          className=\"w-full pl-3 \"\n                          type=\"number\"\n                          required\n                          min=\"0\"\n                          max=\"5\"\n                          disabled={disabled}\n                          id={index}\n                          name=\"test\"\n                          value={student.test}\n                          onChange={(e) => handleFormChange(e)}\n                        />\n                      </td>\n                      <td className=\"p-2 text-center\">\n                        <input\n                          className=\"w-full pl-3 \"\n                          type=\"number\"\n                          required\n                          min=\"0\"\n                          max=\"5\"\n                          disabled={disabled}\n                          id={index}\n                          name=\"seminar\"\n                          value={student.seminar}\n                          onChange={(e) => handleFormChange(e)}\n                        />\n                      </td>\n                      <td className=\"p-2 text-center\">\n                        <input\n                          className=\"w-full pl-3 \"\n                          type=\"number\"\n                          required\n                          min=\"0\"\n                          max=\"5\"\n                          disabled={disabled}\n                          id={index}\n                          name=\"assignment\"\n                          value={student.assignment}\n                          onChange={(e) => handleFormChange(e)}\n                        />\n                      </td>\n                      <td className=\"p-2 text-center\">\n                        <input\n                          className=\"w-full pl-3 \"\n                          type=\"number\"\n                          required\n                          min=\"0\"\n                          max=\"5\"\n                          disabled={disabled}\n                          id={index}\n                          name=\"attendance\"\n                          value={student.attendance}\n                          onChange={(e) => handleFormChange(e)}\n                        />\n                      </td>\n                      <td className=\"p-2 text-center\">\n                        <input\n                          className=\"w-full pl-3 \"\n                          type=\"number\"\n                          required\n                          min=\"0\"\n                          max=\"5\"\n                          disabled\n                          id={index}\n                          name=\"total\"\n                          value={\n                            parseInt(student?.test) +\n                            parseInt(student?.seminar) +\n                            parseInt(student?.assignment) +\n                            parseInt(student?.attendance)\n                          }\n                          onChange={(e) => handleFormChange(e)}\n                        />\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          ) : (\n            \"\"\n          )}\n          {internal.length && disabled ? (\n            <div className=\"flex gap-4\">\n              <button\n                type=\"submit\"\n                className=\"mb-4 flex h-10 w-auto items-center gap-2 rounded-md border-[1.5px] border-solid border-violet-900 bg-slate-800 px-6 py-2 font-semibold tracking-wide text-slate-200 hover:bg-violet-900 focus:bg-violet-900 dark:border-violet-300 dark:bg-violet-900 dark:text-violet-100 dark:hover:bg-slate-900\"\n                onClick={(e) => setDisabled(false)}\n              >\n                <FaEdit /> Edit\n              </button>\n              <button\n                type=\"submit\"\n                className=\"mb-4 flex h-10 w-auto items-center gap-2 rounded-md border-[1.5px] border-solid border-violet-900 bg-slate-800 px-6 py-2 font-semibold tracking-wide text-slate-200 hover:bg-red-700 focus:bg-violet-900 dark:border-violet-300 dark:bg-violet-900 dark:text-violet-100 dark:hover:bg-red-700\"\n                onClick={(e) => deleteInternalMark(e)}\n              >\n                <FaTrash /> Delete\n              </button>\n            </div>\n          ) : (\n            \"\"\n          )}\n          {internal.length && !disabled ? (\n            <button\n              type=\"submit\"\n              className=\"mb-4 flex h-10 group-invalid:hidden w-auto items-center gap-2 rounded-md border-[1.5px] border-solid border-violet-900 bg-slate-800 px-6 py-2 font-semibold tracking-wide text-slate-200 hover:bg-violet-900 focus:bg-violet-900 dark:border-violet-300 dark:bg-violet-900 dark:text-violet-100 dark:hover:bg-slate-900\"\n              onClick={(e) => addInternalMark(e)}\n            >\n              <FaPlus /> Save\n            </button>\n          ) : (\n            \"\"\n          )}\n          <p className=\"text-balance m-2 overflow-hidden text-ellipsis whitespace-break-spaces rounded bg-red-300/50 p-1 text-center font-medium text-red-700 dark:bg-transparent group-invalid:block hidden\">invalid Data</p>\n        </form>\n      </section>\n    </main>\n  );\n};\n\nexport default InternalResultForm;\n"],"names":["InternalResultForm","paperList","useContext","UserContext","paper","setPaper","useState","disabled","setDisabled","internal","setInternal","id","setId","error","setError","fetchInternal","async","e","preventDefault","response","axios","get","data","_id","marks","err","status","students","forEach","student","Object","assign","test","seminar","assignment","attendance","total","handleFormChange","index","parseInt","target","value","key","name","newStudent","newInternal","map","_jsxs","className","children","_jsx","placeholder","required","onChange","defaultValue","hidden","type","onClick","ErrorStrip","length","TableHeader","AdditionalHeaderClasses","Headers","min","max","FaEdit","delete","toast","success","message","icon","_ref","theme","FaTrash","deleteInternalMark","post","patch","addInternalMark","FaPlus"],"ignoreList":[],"sourceRoot":""}